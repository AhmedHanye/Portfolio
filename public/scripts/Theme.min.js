const setTheme=e=>{document.documentElement.className=e},systemTheme=()=>{const e=window.matchMedia("(prefers-color-scheme: dark)");setTheme(e.matches?"dark":"light")},handleTheme=()=>{const e=localStorage.getItem("theme");e?"system"!==e?setTheme(e):systemTheme():(localStorage.setItem("theme","system"),systemTheme())};handleTheme(),window.addEventListener("storage",(e=>{"theme"===e.key&&handleTheme()})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",handleTheme);const localStorageChangeEvent=new Event("localStorageChange"),originalSetItem=localStorage.setItem;localStorage.setItem=function(e,t){const a=localStorage.getItem(e);originalSetItem.apply(this,arguments),"theme"===e&&a!==t&&window.dispatchEvent(localStorageChangeEvent)},window.addEventListener("localStorageChange",handleTheme);